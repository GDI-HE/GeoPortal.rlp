{% load static i18n %}

<a title='zu {{ layer.title }}' href='{{ layer.mdLink }}' target="_blank" style="text-decoration: none">
    <div class="search-result-title" >
        <!--{% if parent_result is not None %}{{ parent_result.title }}    ▶   {% endif %}-->{{ layer.title }}
    </div>
</a>
<div class="search-result-area">

        <div class="img-area">
            <img class="img-preview" style="max-width:100px;" src="{% if result.previewURL is None or result.previewURL|length == 0%} {{ result.extent_url }} {% else %} {{ result.previewURL }} {% endif %}">
            <br>
            {% if result.logoUrl is not None or result.logoUrl|length > 0 %}
                <a href="{{ layer.mdLink }}#tabs-3" target="_blank"><img class="img-logo" title="{{ result.respOrg }}" src="{{ result.logoUrl }}"></a>
            {% endif %}
            <a href="{{ layer.mdLink }}#tabs-4" target="_blank"><img class="img-symbollink" title="{% if result.symbolLink is None %}Keine Lizenzinfos verfügbar{% else %}Es gelten die Nutzungsrechte des Dienstbereitsteller{% endif %}" style="max-width:100px;" src="{% if result.symbolLink is None %} {% static 'searchCatalogue/images/no_licence.jpg' %} {% else %}  {% static 'searchCatalogue/images/icons/icn_warn.png' %} {% endif %}"></a>
            {% if result.isopen is not None %}
                <a href="{{ OPEN_DATA_URL }}" target="_blank">
                    <img class="img-open"  src="{% static 'searchCatalogue/images/open-data.jpg' %}" title="Open Data">
                </a>
            {% endif %}
            {% if result.logged %}
                <img class="resource-element-info-logging" title="{% trans 'Access will be logged' %}" src="{% static 'searchCatalogue/images/icons/icn_isLogging.png' %}">
            {% endif %}
        </div>

        <table class="search-result-detail-table">
            <tr>
                <td class="search-result-detail-title">Zuständige Stelle:</td>
                <td class="search-result-detail"><a href="{{ layer.mdLink }}#tabs-3" target="_blank">{{ result.respOrg }}</a></td>
            </tr>
            <tr>
                <td class="search-result-detail-title">Datum der Metadaten:</td>
                <td class="search-result-detail"><a href="{{ layer.mdLink }}#tabs-2" target="_blank">{{ result.date }}</a></td>
            </tr>
            {% if layer.abstract is not None %}
            <tr>
                <td class="search-result-detail-title">Beschreibung:</td>
                <td class="search-result-detail"><p>{{ layer.abstract }}</p></td>
            </tr>
            {% endif %}
        </table>
    <div>
        {% with result.layer as layers %}
            {% with 'wms' as type %}
                {% include 'search_result_actions.html' %}
            {% endwith %}
        {% endwith %}
    </div>
{% if layer.layer is not None %}
    <!-- There are more children for this result. Make it collapsible! -->
    <div class="sublayer">
        <div class="sublayer-more">
            <div>
                {% trans 'Sublayers' %} ({{ layer.layer|length }})
                <span class="accordion icon closed" title="Ausklappen"></span>
            </div>
        </div>
        {% with layer as parent_result %}
            {% with layer.layer as layers %}
                {% for layer in layers %}
                    <div class="result-item-layer hide">
                        {% include 'rlp/wms/wms_search_result.html' %}
                    </div>
                {% endfor %}
            {% endwith %}
        {% endwith %}
    </div>
{% endif %}
</div>